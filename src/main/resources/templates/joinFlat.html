<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Flat - Flattie.com</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/joinFlat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header>
        <h1>Flattie.com</h1>
        <p>Your one-stop shop for flatmate management</p>
    </header>

    <!-- Directly inject the nav menu from /fragments/ -->
    <div th:replace="~{fragments/navMenu :: navMenu}"></div>

    <div class="container">
        <!-- Show the "Join Flat" form only if no flat information is available -->
        <section id="join-flat" th:unless="${flat != null}">
            <i class="fas fa-home login-icon"></i>
            <h2>Join Flat</h2>
            <form action="/joinFlat" method="post">
                <label for="flat_code">Flat Code</label>
                <input type="text" id="flat_code" name="flat_code" placeholder="Enter flat code" required>

                <button type="submit">Join</button>
            </form>
        </section>

        <!-- Display flat information only if a flat is available -->
        <section id="flat-info" th:if="${flat != null}">
            <h2>Flat Information</h2>
            <p><strong>Flat Name:</strong> <span th:text="${flat.flatName}"></span></p>
            <p><strong>Address:</strong> <span th:text="${flat.address}"></span></p>
            <p><strong>City:</strong> <span th:text="${flat.city}"></span></p>
            <p><strong>Postcode:</strong> <span th:text="${flat.postcode}"></span></p>
            <p><strong>Description:</strong> <span th:text="${flat.flatDescription}"></span></p>
            <p><strong>Weekly Rent:</strong> <span th:text="${flat.weeklyRent}"></span></p>
            <p><strong>Number of Rooms:</strong> <span th:text="${flat.rooms}"></span></p>
        </section>
    </div>

    <footer>
        <p>&copy; 2024 Flattie.com. All rights reserved.</p>
    </footer>
</body>
</html>